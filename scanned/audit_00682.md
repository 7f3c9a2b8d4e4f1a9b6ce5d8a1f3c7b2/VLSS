# Potential DOS in delegation_service Pool

## Summary
The report discusses a bug in a service called delegation_service, where there is a limit on the number of direct delegators a pool can have. This limit can be exploited by a malicious user who can fill the list with fake delegators, preventing real delegators from staking. This can be combined with another vulnerability to bypass a minimum delegation amount and leave small amounts of funds in the pool, making the attack free. To solve this issue, it is suggested to impose a minimum delegation amount for the lifetime of the delegator's funds to ensure that all delegators are contributing meaningfully. A fix for this bug has been implemented in a recent patch.

## Details
## Delegation Service Vulnerability

In `delegation_service`, there is a hard limit on the number of direct delegators a pool can have:  
**MAX_NUMBER_OF_DELEGATIONS** (currently 100).  

A malicious user could fill the delegator list with fake delegators, staking small amounts in order to prevent real delegators from staking. In conjunction with OS-TOR-ADV-00, an attacker could bypass the `min_delegation_amount` and leave dust amounts in the pool, effectively making this attack free.

## Remediation

In order to maximize efficiency for the validators, it is important to ensure that all delegators that wish to stake are able to. A `min_delegation_amount` imposed for the lifetime of the delegator’s funds could help ensure that all delegators are actually contributing to the validator’s total stake in a meaningful way. Consider implementing a fix for OS-TOR-ADV-00 with this issue in mind.

## Patch

Fixed in **af0d61f**.

© 2022 OtterSec LLC. All Rights Reserved. 9 / 19
