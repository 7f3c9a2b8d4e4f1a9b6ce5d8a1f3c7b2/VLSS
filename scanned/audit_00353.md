# [FUEL1-21] Failure to transfer the base asset to the recipient

## Summary
The report describes a bug in a transaction script that is used to transfer a base asset to a bridge contract. The bug causes the bridge contract to only transfer bridged tokens and not the base asset, resulting in the base asset being trapped in the bridge contract. The bug has been fixed and the base asset should now be transferred to the recipient.

## Details
**Severity:** Medium

**Path:** fuel-bridge/packages/message-predicates/contract-message-predicate/script_asm.rs#L54, fuel-bridge/packages/fungible-token/bridge-fungible-token/src/main.sw#L336-L348

**Description:**

The transaction script `script_asm.rs` facilitates the transfer of the base asset (`0x000...` or `ZERO_B256`) to the bridge contract.

```
op::call(REG_DATA_PTR, REG_MSG_AMOUNT, REG_ASSET_PTR, RegId::CGAS),
```
Where `REG_ASSET_PTR` equals `0x000...` and `REG_MSG_AMOUNT` contains the amount of the base asset from the input message.

```
op::gtf(
    REG_MSG_AMOUNT,
    RegId::ZERO,
    GTFArgs::InputMessageAmount.into(),
)
```
However, the bridge contract fails to transfer the base asset to the recipient, only transferring bridged tokens (e.g. USDC).

```
let asset_id = AssetId::new(contract_id(), sub_id);
```
```
match message_data.deposit_type {
    DepositType::Address | DepositType::Contract => {
        transfer(message_data.to, asset_id, amount)
    },
    DepositType::ContractWithData => {
        let dest_contract = abi(MessageReceiver, message_data.to.as_contract_id().unwrap().into());
        dest_contract
            .process_message {
                coins: amount,
                asset_id: asset_id.into(),
            }(msg_idx);
    }
};
```
Consequently, the base asset amount is trapped in the bridge contract.

**Remediation:**  Transfer the base asset amount to the recipient.

**Status:**   Fixed


- - -
