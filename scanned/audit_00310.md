# Incorrect Rounding Directions

## Summary
No summary provided.

## Details
## Internal Unlock Functionality

`internal_unlock` unlocks the amount from the delegation pool and burns the equivalent `truAPT` tokens. It creates an `UnlockRequest` for the user with the unstaked amount, which later facilitates the withdrawal of APT from the protocol.

> _aptos-staker/sources/staker.move rust_
```rust
let truAPT_amount;
// if user's remaining balance falls below threshold, withdraw entire user stake
if (max_withdraw - amount < MIN_COINS_ON_SHARES_POOL) {
    amount = max_withdraw;
    truAPT_amount = truAPT::balance_of(receiver);
} else {
    truAPT_amount = convert_to_shares(amount);
}
```

`amount` represents the staker requested for unstaking from the delegation pool and allocated to the user, and `truAPT_amount` denotes the tokens taken from the user and burned. The protocol benefits from rounding down when calculating `amount` and rounding up when calculating `truAPT_amount`.

## Remediation

Employ `convert_to_assets(truAPT::balance_of(user))` to calculate the `amount` and apply rounding up when calculating the `truAPT_amount`.

## Patch

The development team acknowledges the issue and accepts the rounding costs to enhance user experience.

Â© 2024 Otter Audits LLC. All Rights Reserved. 7/12
