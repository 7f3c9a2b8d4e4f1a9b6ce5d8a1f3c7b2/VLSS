# Including Interest In Vault CR Calculation

## Summary
The functions redeem_collateral and liquidate are used to calculate the collateral ratio (CR) for a vault. However, they do not take into account the updated interest of the vault when calculating the CR. This leads to an incorrect CR value being used in other calculations. To fix this, the functions should be updated to consider the updated interest of the vault. Specifically, the function should use accrue_vault_interest to update the vault's interest before calculating the CR. Additionally, the updated interest should be taken into account when calculating the CR for a vault in both redeem_collateral and liquidate. This issue has been fixed in version 108cd74 by using vault_liability_amount, which returns the total liability of the vault, including both debt and interest.

## Details
## Redeem Collateral and Liquidate

The `redeem_collateral` and `liquidate` functions calculate the collateral ratio (CR) for a vault, which is used in redemption and liquidation calculations. However, these functions do not account for the updated interest of the vault when calculating the CR. 

As a result, the CR is calculated without considering `vault.interest`, leading to the use of an incorrect CR value in other calculations.

## Remediation

`redeem_collateral` and `liquidate` should be updated to consider the updated interest of the vault when calculating the collateral ratio (CR). Specifically, `vault.interest` should be updated using `accrue_vault_interest` just before calculating the CR in `redeem_collateral`. 

In addition, the updated `vault.interest` should be taken into account when calculating the CR for a vault in both `redeem_collateral` and `liquidate`.

## Patch

Fixed in commit **108cd74** by using `vault_liability_amount`, which returns the total liability of the vault, i.e., `vault.debt + vault.interest`.
