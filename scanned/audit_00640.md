# Trading Improvements And Features

## Summary
No summary provided.

## Details
## Self-Trading in Market Matching

Self-trading is not supported in the current version; the function `market::match` aborts if self-trading occurs. This limitation may hinder traders' ability to respond accurately to fast-moving market conditions. To enhance trading flexibility, it could be beneficial to offer additional self-trading options.

## Code Snippet

```rust
src/move/econia/sources/market.move

fun match<
    BaseType,
    QuoteType
>([..]): ([..]) {
    [..]
    let (maker, custodian_id, size) = (order_ref_mut.user, order_ref_mut.custodian_id, fill_size);
    // Assert no self match.
    assert!(maker != taker, E_SELF_MATCH);
    [..]
}
```

Instead of aborting during self-trading, it is proposed that configurable self-match behavior be supported. For instance, users could specify one of the following options: abort, proceed, cancel, etc.

**Patch**  
Feature added and discussion documented in #43.

---

## 2. Order State Synchronization

### Description

The same order is stored in the AVL queue on the market side and in the tablist on the user side. It is suggested to verify that critical fields, such as order size, are equivalent in both locations. This verification would ensure that the order is synchronized without discrepancy across user-level and market-level states.

**Patch**  
Improvement was added in commit 1eb831b.

---

## 3. Add Support for Passive Restriction

### Description

Econia does not disclose the best bid/ask prices during normal operations, except when conducting mutation operations (such as taker or maker orders). This lack of transparency can pose challenges for makers aiming to place orders at fixed or relative offsets from the spread. It may be advantageous to add options that enable finer-grained relative pricing from the best bid/ask.

**Patch**  
Feature added and discussion documented in #57.
