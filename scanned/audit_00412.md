# Exchange Rate Check

## Summary
No summary provided.

## Details
## Reward Calculation Function

The `calculate_rewards` function derives the rewards a user would receive when withdrawing staked funds from a pool, considering exchange rates at the time of stake activation and the current epoch.

### File Location
- **Path**: `sources/util.move`
- **Language**: RUST

```rust
/// These codes are copied and changed from `sui_system::staking_pool.move`
public fun calculate_rewards(wrapper: &mut SuiSystemState,
pool_id: ID, staked_amount: u64,
stake_activation_epoch: u64,
current_epoch: u64) -> u64 {
    [...]
    let exchange_rates = sui_system::pool_exchange_rates(wrapper, &pool_id);
    [...]
}
```

### Issue
The function currently lacks a check to validate if the exchange rate for `current_epoch` exists. Thus, if the exchange rate for the `current_epoch` is unavailable, it indicates that the system has insufficient information to perform this conversion, resulting in inaccurate reward calculation.

### Remediation
Return zero when the exchange rate for the `current_epoch` is not available, providing a safe fallback value indicating the absence of the exchange rate.
