# UI/AlertView - Unnecessary Use of dangerouslySetInnerHTML ✓ Fixed

## Summary
A bug report was filed regarding the use of `dangerouslySetInnerHTML` in the AlertView component of the wallet-ui package. This component is used to set `innerHTML` instead of the component’s value, which would be auto-escaped. The attribute name `text` is misleading since the component is never used with HTML as input. Setting HTML from code is risky, as it can expose users to a cross-site scripting (XSS) attack.

The bug was fixed with Consensys/starknet-snap@7231bb7fa4671283b2e7b4cbf5a519d56a57697a by not using `dangerouslySetInnerHTML`. The recommendation is to not use `dangerouslySetInnerHTML` unless there is a specific requirement that passed in HTML be rendered. If so, the attribute name should be renamed to `html` instead of `text` to set clear expectations regarding how the input is treated. Nevertheless, since the component is not used with HTML input, it is recommended to remove `dangerouslySetInnerHTML` altogether.

## Details
#### Resolution



Fixed with [Consensys/starknet-snap@7231bb7fa4671283b2e7b4cbf5a519d56a57697a](https://github.com/Consensys/starknet-snap/tree/7231bb7fa4671283b2e7b4cbf5a519d56a57697a) by not using `dangerouslySetInnerHTML`. Additionally, the client provided the following statement:



> 
> 1. Remove dangerouslySetInnerHTML from UI
> 
> 
> 




#### Description


`AlertView` is populated by setting `innerHTML` instead of the component’s value, which would be auto-escaped. This only makes sense if the component is supposed to render HTML. However, the component is never used with HTML as input, and the attribute name `text` is misleading.


**packages/wallet-ui/src/components/ui/atom/Alert/Alert.view.tsx:L11-L36**



```

export function AlertView({ text, variant, ...otherProps }: Props) {
 const paragraph = useRef<HTMLParagraphElement | null>(null);
 const [isMultiline, setIsMultiline] = useState(false);
 useEffect(() => {
 if (paragraph.current) {
 const height = paragraph.current.offsetHeight;
 setIsMultiline(height > 20);
 }
 }, []);
 return (
 <Wrapper isMultiline={isMultiline} variant={variant} {...otherProps}>
 <>
 {variant === VariantOptions.SUCCESS && <LeftIcon icon={['fas', 'check-circle']} />}
 {variant === VariantOptions.INFO && <LeftIcon icon={['fas', 'info-circle']} color={theme.palette.info.dark} />}
 {variant === VariantOptions.ERROR && (
 <LeftIcon icon={['fas', 'exclamation-circle']} color={theme.palette.error.main} />
 )}
 {variant === VariantOptions.WARNING && (
 <LeftIcon icon={['fas', 'exclamation-triangle']} color={theme.palette.warning.main} />
 )}
 <Parag ref={paragraph} color={variant} dangerouslySetInnerHTML={{ \_\_html: text }} />
 </>
 </Wrapper>
 );
}

```
**packages/wallet-ui/src/components/ui/organism/NoFlaskModal/NoFlaskModal.view.tsx:L4-L25**



```
export const NoFlaskModalView = () => {
 return (
 <Wrapper>
 <StarknetLogo />
 <Title>You don't have the MetaMask Flask extension</Title>
 <DescriptionCentered>
 You need to install MetaMask Flask extension in order to use the StarkNet Snap.
 <br />
 <br />
 <AlertView
 text="Please make sure that the regular MetaMask extension is disabled or use a different browser profile"
 variant="warning"
 />
 </DescriptionCentered>
 <a href="https://metamask.io/flask" target="\_blank" rel="noreferrer noopener">
 <ConnectButton customIconLeft={<FlaskIcon />} onClick={() => {}}>
 Download MetaMask Flask
 </ConnectButton>
 </a>
 </Wrapper>
 );
};

```
Setting HTML from code is risky because it’s easy to inadvertently expose users to a [cross-site scripting (XSS)](https://en.wikipedia.org/wiki/Cross-site_scripting) attack.


#### Recommendation


Do not use `dangerouslySetInnerHTML` unless there is a specific requirement that passed in HTML be rendered. If so, rename the attribute name to `html` instead of `text` to set clear expectations regarding how the input is treated. Nevertheless, since the component is not used with HTML input, we recommend removing `dangerouslySetInnerHTML` altogether.
