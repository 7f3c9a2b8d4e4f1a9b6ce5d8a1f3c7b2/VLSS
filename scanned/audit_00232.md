# Risk of Compromising Snapshot Integrity

## Summary
The report discusses a vulnerability related to the process of taking a snapshot. This process relies on accurately counting the total number of tokens and distinguishing between locked and unlocked tokens. However, there is a problem with the "join" function which allows two different tokens to be merged, potentially changing the balance and total supply of tokens during the snapshot. This can cause the total supply to no longer match the sum of unlocked and locked tokens. To fix this issue, a locking mechanism needs to be implemented to prevent the "join" function from being used during the snapshot process. This issue has been resolved in the latest patch, f6fa43b.

## Details
## Vulnerability Overview

The vulnerability concerns the integrity of the snapshot process. A successful snapshot relies on accurately capturing the total supply of tokens and distinguishing between those that are counted (unlocked) and those that are not (locked). 

The `join` function allows two different tokens to be merged into one, potentially altering the balances and total supply of tokens mid-snapshot. If tokens that are part of the snapshot join with those that are not, `total_supply` will no longer be equal to `unlocked_sum + locked_sum`.

## Remediation

Employ a locking mechanism to block `shared_token::join` during the snapshot process.

## Patch

Resolved in commit `f6fa43b`.
