# Accessible Locked Pool

## Summary
No summary provided.

## Details
## Flashloan Transaction and Pool Locking

When a flashloan transaction is performed, the pool that is used is being locked. However, functions such as `get_reserves_size` and `get_cumulative_prices` can still access the pool due to the lack of sufficient checks.

## Remediation

Insert at the top of the functions an assert to prevent the functions from being used during flashloans.

### File: sources/swap/liquidity_pool.move

```move
public fun get_reserves_size<X, Y, LP>(pool_addr: address): (u64, u64)
acquires LiquidityPool {
    assert_no_emergency();
    + assert_pool_locked<X, Y, LP>(pool_addr);
}
```

## Patch

Resolved in commit `8eacbb1` by including the suggested assert in both functions.

Â© 2022 OtterSec LLC. All Rights Reserved. 12 / 17
