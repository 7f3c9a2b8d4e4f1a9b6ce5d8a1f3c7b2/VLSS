# Code Refactoring

## Summary
No summary provided.

## Details
## Code Review Suggestions

1. **Update Wallet Struct Attribution**  
   In `register_service::add_wallet_by_investor`, both the `creator` and `last_updated_by` fields of the `Wallet` struct are set to `wallet_addr`, which is the address of the added wallet. This implies that the wallet is attributed to itself as its creator and last updater. Change the `creator` and `last_updated_by` fields, as well as the `sender` field in the emitted event, to utilize `signer::address_of(authorizer)` instead of `wallet_addr`.

   ```rust
   move/sources/registry_service.move
   public entry fun add_wallet_by_investor(
       authorizer: &signer, wallet_addr: address
   ) acquires InvestorInfo, WalletTypesRegistry {
       [...]
       smart_table::add(
           investor_wallets,
           wallet_addr,
           Wallet { owner, creator: wallet_addr, last_updated_by: wallet_addr }
       );
       [...]
       event::emit(
           DSRegistryServiceWalletAdded {
               wallet: wallet_addr,
               investorId: owner,
               sender: wallet_addr
           }
       );
   }
   ```

2. **Abort Non-Existent Lock Records**  
   Abort `lock_manager::remove_lock_record` in cases where the investor or the specified `lock_index` does not exist to improve code reliability and user experience. Silent failures may result in ambiguity, as the caller may not be aware that the intended operation did not succeed.

3. **Standardize FORBIDDEN Constant**  
   The `FORBIDDEN` constant is defined with different values in different modules. It is declared as `3` in `registry_service` and `4` in `compliance_service`. Ensure that the value is the same in both modules for consistency.

4. **Streamline Status and Error Codes**  
   Returning status and error codes in `pre_issuance_check` and `validate_deposit` is unnecessary, as the only possible code is `VALID`. For any other code, the function will abort.

5. **Remove Investor’s Wallets**  
   To ensure proper removal of an investor, remove the investor’s wallets from `investors_wallets`.

## Remediation
Implement the above-mentioned suggestions.

## Patch
1. Issue #1 resolved in `06538b8`.
2. Issue #2 resolved in `06538b8`.
