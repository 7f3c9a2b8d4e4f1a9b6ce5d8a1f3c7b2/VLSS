# Add Sanity Checks

## Summary
No summary provided.

## Details
## Audit Summary: native_pool::unstake_amount_from_validators

`native_pool::unstake_amount_from_validators` has the potential to terminate unexpectedly in two different instances due to unforeseen cases.

## Original Code

```rust
native_pool.move RUST
fun unstake_amount_from_validators(
    // ...
    validators: vector<address>,
    // ...
): Coin<SUI> {
    let i = vector::length(&validators) - 1;
    // ...
    // extract our fees
    let fee_balance = balance::split(&mut total_removed_balance, fee + collectable_reward);
    coin::join(&mut self.collectable_fee, coin::from_balance(fee_balance, ctx));
    // ...
}
```

## Remediation

Handle these cases instead of triggering an abrupt termination at those points.

```rust
native_pool.move DIFF
): Coin<SUI> {
    - let i = vector::length(&validators) - 1;
    + let validators_len = vector::length(&validators);
    + if (validators_len > 0) {
    +     return coin::zero(ctx);
    + };
    + let i = validators_len - 1;
    let total_removed_balance = balance::zero<SUI>();
    // ...
    // extract our fees
    - let fee_balance = balance::split(&mut total_removed_balance, fee + collectable_reward);
    + let fee_value = fee + collectable_reward;
    + if (balance::value(&total_removed_balance) < fee_value) {
    +     fee_value = balance::value(&total_removed_balance);
    + };
    + let fee_balance = balance::split(&mut total_removed_balance, fee_value);
    coin::join(&mut self.collectable_fee, coin::from_balance(fee_balance, ctx));
}
```

## Patch

The Volo teamâ€™s decision is to introduce custom `assert!()` statements in order to enhance the clarity of potential aborts within the code. 

**Fixed in 8099e49.** 

## Conclusion

These changes improve the stability of `unstake_amount_from_validators` by preventing unexpected terminations and enhancing error reporting through assertions.
