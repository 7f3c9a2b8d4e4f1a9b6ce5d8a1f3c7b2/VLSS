# Possible Overflow Due to Exceeding the Type Limit

## Summary
This bug report discusses a potential issue with the calculation of dividends and unlocked amounts in the code. This issue may occur when dealing with large values, causing an overflow in the u64 data type. To fix this issue, the values involved in the calculation should be converted to u128 before performing any arithmetic operations. This bug has been resolved in the code update a393844.

## Details
## Potential Overflow Risk in `dividends::calculate_available_dividends`

There is a potential overflow risk in `dividends::calculate_available_dividends` during the calculation of dividends for a particular address. Specifically, when multiplying two large `u64` values, such as `self.total_funds` and `snapshot.address_balance(addr)`, the result may exceed the maximum value for `u64`, resulting in an overflow.

## Code Snippet
```rust
public fun calculate_available_dividends<T, U>(
    self: &Dividends<U>,
    snapshot: &Snapshot<T>,
    addr: address,
): u64 {
    [...]
    // prettier-ignore
    let addr_total_dividends =
        (self.total_funds * snapshot.address_balance(addr)) / unlocked_supply_t;
    addr_total_dividends - already_claimed
}
```

Similarly, `schedule_config::calculate_unlocked` contains multiple multiplications and divisions involving `u64` values, which may result in an overflow when handling large amounts or time periods. For example, while calculating `unlocked`, `full_amount`, and `initial_release_portion_in_bps` may be large values, and multiplying them in `u64` space may exceed the `u64` limit.

## Remediation
Ensure the values involved in the multiplication and division are converted to `u128` before performing the arithmetic operations. Moving to `u128` will provide a much larger range, removing the risk of overflow.

## Patch
Resolved in `a393844`.
