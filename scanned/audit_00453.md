# Division By Zero Error

## Summary
No summary provided.

## Details
## Borrow Flash Loan

The `borrow_flash_loan` function calculates the flash loan fee based on the configured `fee_rate` and a potential discount. If both `fee_rate` and `fee_discount_numerator` are zero (no fee and no discount applied), it will be impossible to obtain a flash loan from this reserve. In this case, both `fee_discount_numerator` and `fee_discount_denominator` will be zero, resulting in an attempt to divide `base_fee` by zero in `u64::mul_div`. Since `u64::mul_div` is called with parameters `a = 0` and `b = 0`, `u128::mul_div` will also be called with `a = 0` and `b = 0`. Consequently, the call to `is_safe_mul` will fail due to division by zero.

## Source Code

```rust
sources/market/reserve.move

fun borrow_flash_loan_internal<T>(
    self: &mut Reserve,
    amount: u64,
    fee_discount_numerator: u64,
    fee_discount_denominator: u64,
): (Balance<T>, FlashLoan<T>) {
    let balance = balance_bag::split<T>(&mut self.underlying_balances, amount);
    let fee_rate = *wit_table::borrow(&self.flash_loan_fees, get<T>());
    let base_fee = if (fee_rate > 0) {
        // charge at least 1 unit of coin when fee_rate is not 0
        amount * fee_rate / FlashloanFeeScale + 1
    } else {
        0
    };
    let fee_discount = u64::mul_div(base_fee, fee_discount_numerator, fee_discount_denominator);
    let fee = base_fee - fee_discount;
    let flash_loan = FlashLoan<T> { loan_amount: amount, fee };
    (balance, flash_loan)
}
```

A similar case occurs in a standard borrow with a ticket if the `base_borrow_fee_rate` ID is set to zero and a ticket is created with `borrowing_fee_discount_numerator` set to zero, although there is a relatively low possibility of this occurring since the ticket would have to be issued to give a zero discount.

## Remediation

Modify `u64::mul_div` to handle the zero case explicitly. If either `a` (dividend) or `b` (divisor) is zero and `c` (denominator) is not zero, the function should return zero. This will prevent the division by zero error and allow flash loans to proceed even with a zero fee rate and no discount.
