# Exemption Of Users From Covering Rounding Errors

## Summary
No summary provided.

## Details
## Rounding Errors in Withdrawal Process

The `router::request_withdraw` handles rounding errors that may occur during the unstaking process. However, instead of charging the user for the rounding error, the protocol currently pays for it by burning `amAPT` tokens from the treasury. By having the protocol pay for rounding errors, users are relieved of the financial burden of these errors. As a result, users may exploit the system.

Although small individually, rounding errors accumulate over time and become a significant drain on the protocol's resources if the protocol consistently covers the costs. This may deplete the treasury or create an imbalance in the token economy.

## Code Snippet

```rust
> _delegation_manager_trust
public fun request_withdraw(amapt: Coin<AmnisApt>, receiver: address): Object<WithdrawalToken>
,→ acquires Events {
    delegation_manager::update_rewards()
    let amount = coin::value(&amapt);
    assert!(amount >= MIN_AMOUNT, EINSUFFICIENT_AMOUNT);
    // There can be a rounding error of 1 OCTA. We'll extract this from the treasury.
    let (rounding_error, unlock_amount) = delegation_manager::unlock_stake(coin::value(&amapt));
    if (rounding_error > 0) {
        amapt_token::burn(treasury::withdraw_amapt(rounding_error));
    };
    [...]
}
```

## Remediation

Update `request_withdraw` to charge users for any rounding errors incurred during the unstaking process.

## Patch

Fixed in `44d5605`.

© 2024 Otter Audits LLC. All Rights Reserved. 6/10
