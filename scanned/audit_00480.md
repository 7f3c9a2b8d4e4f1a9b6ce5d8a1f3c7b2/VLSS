# Optimizing Update Function

## Summary
No summary provided.

## Details
## Performance Improvement in User Loan and Collateral Updates

In `update_user_loans` and `update_user_collaterals` of `storage.move`, the use of `vector::contains(&storage.users, &user)` for inserting items without duplicates can be computationally expensive. As `vector::contains` iterates over the entire vector, and considering the potentially large number of users, this operation consumes significant gas.

To improve performance, leverage the `Storage.user_info` table to check if the user exists. Since `Storage.user_info` is implemented as a table, it provides a more efficient solution.

## Code Snippet

```rust
public(friend) fun update_user_loans(storage: &mut Storage, asset: u8, user: address) {
    [...]
    if (!vector::contains(&storage.users, &user)) {
        vector::push_back(&mut storage.users, user)
    }
}

public(friend) fun update_user_collaterals(storage: &mut Storage, asset: u8, user: address) {
    [...]
    if (!vector::contains(&storage.users, &user)) {
        vector::push_back(&mut storage.users, user)
    }
}
```

## Remediation

Replace the current invocation of `vector::contains` over the `storage.users` vector with a direct lookup in the `Storage.user_info` table to improve performance and efficiency.
