# Inconsistent Table Error Handling

## Summary
No summary provided.

## Details
## Error Handling in Functions

In some functions, `table::borrow` and `table::add` are used without error handling.

- `table::borrow` will throw an error if no value exists for the given key.
- `table::add` will fail if there exists a value for the given key already.

## Code Example

### File: `sources/app/counter.move`

```move
public entry fun send_to_remote(account: &signer, chain_id: u64, fee: u64) ... {
    [..]
    let config = borrow_global<Config>(signer_addr);
    let dst_address = table::borrow(&config.trusted_remote, chain_id);
    [..]
}

public entry fun set_remote(account: &signer, chain_id: u64, address: vector<u8>) .. {
    [..]
    let config = borrow_global_mut<Config>(signer_addr);
    table::add(&mut config.trusted_remote, chain_id, address);
}
```

## Remediation

Always check if the value exists with `table::contains` before borrowing. In case of `table::add`, if updating is allowed, use `table::upsert`; otherwise, use `table::contains` to handle errors.

Â© 2022 OtterSec LLC. All Rights Reserved. 10 / 16
