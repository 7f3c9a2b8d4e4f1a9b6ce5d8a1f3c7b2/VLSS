# Simplify Associated Account Derivation

## Summary
No summary provided.

## Details
## Documentation

Similar to OS-TOR-SUG-02, it is sometimes possible to derive associated data from the given arguments. In these cases, it is more canonical to use the derivation directly rather than requiring auxiliary arguments to the function which are verified separately. 

## Example

```move
delegation/sources/delegation_service.move MOVE
public entry fun set_operator(
    pool_owner: &signer,
    stake_pool_address: address,
    new_operator: address
) acquires ManagedStakePool {
    let managed_pool_address = signer::address_of(pool_owner);
    // (Input Assert, keep)
    assert_pool_exists(managed_pool_address);
    // (Input Assert, keep)
    assert_is_stake_pool_owner(managed_pool_address, stake_pool_address);
    let managed_stake_pool = borrow_global<ManagedStakePool>(
        managed_pool_address
    );
    stake::set_operator_with_cap(
        &managed_stake_pool.stake_pool_owner_cap,
        new_operator
    );
}
```

In this example, `stake_pool_address` can be derived from the provided `managed_pool_address`. In fact, this is how `assert_is_stake_pool_owner` is implemented.

## Remediation

It is simpler and safer to derive accounts whenever possible rather than using separate arguments and explicitly verifying conditions inside the function. In this case, omit the `stake_pool_address` argument and derive it from the `pool_owner`.

## Patch

Resolved in ef89a88.

Â© 2022 OtterSec LLC. All Rights Reserved. 16 / 19
