# Missing Harvest Functionality on Emergency

## Summary
No summary provided.

## Details
## Harvest Protocol

The Harvest protocol allows users to stake coins in exchange for rewards. Users are allowed to harvest the accumulated rewards at any given time, if they are available.

## Code Snippet

```rust
sources/stake.move
public fun harvest<S, R>(user: &signer, pool_addr: address): Coin<R>
→ acquires StakePool {
    assert!(exists<StakePool<S, R>>(pool_addr), ERR_NO_POOL);
    [...]
    event::emit_event<HarvestEvent>(
        &mut pool.harvest_events,
        HarvestEvent { user_address: user_addr, amount: → earned_to_withdraw },
    );
    coin::extract(&mut pool.reward_coins, earned_to_withdraw)
}
```

However, in case of emergency, the users can only unstake their coins but cannot harvest the rewards.

```rust
sources/stake.move
[...]
/// This field set to `true` only in case of emergency:
/// * only `emergency_unstake()` operation is available in the state
→ of emergency
emergency_locked: bool,
[...]
```

The rewards will be locked forever.

## Remediation

Implement a separate functionality to allow users to harvest rewards during an emergency state.
