# Denial of Service on Newly Created Vaults by Manager

## Summary
The report states that there is a bug in the `create_vault_by_manager()` function, which allows for the creation of a new vault without an initial deposit. This results in the vault having 0 shares and 0 assets, which causes a division-by-zero error when other vault operations are performed. This makes the vault unusable. The recommendation is to either initialize new vaults with a small number of virtual shares or modify the `update_share_price()` function to handle the case of zero total shares by setting a default share price instead of performing a division. The bug has been marked as "Fixed" by the client and can be found in the `230ad6bd8693581099af2dcfb2f054299b59ce4a` address. This issue was identified by both the audit team and the Dipcoin team during their internal review processes.

## Details
**Update**
Marked as "Fixed" by the client. Addressed in: `230ad6bd8693581099af2dcfb2f054299b59ce4a`.

> This issue was independently identified by both the audit team and the Dipcoin team as part of their internal review processes.

**File(s) affected:**`vault.move`

**Description:** The `create_vault_by_manager()` function allows creating a new vault without an initial deposit, resulting in a vault with 0 shares and 0 assets. Other vault operations, such as `deposit()`, call `update_share_price()`, which performs a division by `vault.total_shares`. For vaults with 0 shares, this leads to a division-by-zero error, rendering the vault unusable.

**Recommendation:** Consider mitigating this by either:

1.   Initializing new vaults with a small number of **virtual** shares.
2.   Modifying the `update_share_price()` function, by adding a check to handle the case where total_shares is zero. If it is zero (indicating an initial deposit), the share price should be fixed at a default value (e.g., 1.0, which is `library::base_uint()`) instead of being calculated via division.
