# Insufficient Gene Definition Checks

## Summary
No summary provided.

## Details
## Gene Definitions from BCS

The function `definitions_from_bcs` should ensure the correct order of genes. Otherwise, if definitions are set in an incorrect order, receiving parts of the value becomes impossible.

```rust
sources/genesis.move

public fun definitions_from_bcs(bytes: vector<u8>): vector<GeneDefinition> {
    let bytes = bcs::new(bytes);
    let total = bcs::peel_vec_length(&mut bytes);
    let defs = vector::empty<GeneDefinition>();
    
    // Iterate over the main vector of `GeneDefinition`
    while (total > 0) {
        let name = utf8(bcs::peel_vec_u8(&mut bytes));
        let values = vector::empty<Value>();
        let val_len = bcs::peel_vec_length(&mut bytes);
        
        // Read each value separately.
        while (val_len > 0) {
            let (selector, val_name) = (
                bcs::peel_u8(&mut bytes),
                utf8(bcs::peel_vec_u8(&mut bytes))
            );
            vector::push_back(&mut values, Value { selector, name: val_name });
            val_len = val_len - 1;
        }
        vector::push_back(&mut defs, GeneDefinition { name, values });
        total = total - 1;
    }
    defs
}
```

## Remediation

Store `prev_selector` in a variable outside the loop and check if `current_selector` is greater than `prev_selector` to ensure that the selector is always increasing.

## Patch

Fixed in commit `5462a42`.
