# Mismatched Return Type

## Summary
No summary provided.

## Details
## Inreferral_vault.move

The `balance_of` function is designed to return the balance of the referrer of `Coin<T>`. However, it returns a `Balance` structure instead of `u64`.

## Function Implementation

```rust
public fun balance_of<T>(
    referral_vault: &ReferralVault,
    referrer: address,
): u64 {
    let type_name = type_name::get<T>();
    if (!referrer_has_rebate(referral_vault, referrer))
        return 0;
    let rebates = table::borrow(&referral_vault.rebates, referrer);
    if (!bag::contains(rebates, type_name))
        return 0;
    *bag::borrow(rebates, type_name)
}
```

## Remediation

Retrieve the amount stored in a `Balance` structure using `balance::value`.

## Code Diff

```diff
@@ -113,7 +113,9 @@ module referral_vault::referral_vault {
    if (!bag::contains(rebates, type_name))
        return 0;
    - *bag::borrow(rebates, type_name)
    + balance::value<T>(
    +    bag::borrow(rebates, type_name)
    + )
}
```

## Patch

Fixed in `a6a769c`.
