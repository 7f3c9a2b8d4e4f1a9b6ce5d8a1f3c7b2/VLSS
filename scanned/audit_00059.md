# Mean-Sensitive Outlier Detection in Oracle Aggregation

## Summary
No summary provided.

## Details
**Update**
Acknowledged by the client.

**File(s) affected:**`bucket_oracle/sources/aggregator.move`

**Description:** The outlier detection mechanism uses average-based comparison, which is inherently unpredictable. When calculating outliers based on the weighted average of all submitted prices, the reference point for determining outliers shifts based on the distribution of prices themselves, creating mean-sensitivity that makes the final price non-deterministic. This approach can lead to unexpected oracle rejections or acceptances based on the specific price values submitted.

During periods of high volatility when oracle prices naturally diverge, a borderline outlier oracle might be included or excluded depending on other oracles' values. For example, with three oracles reporting $100, $101, and $120 with a 10% tolerance threshold: the mean of $107 causes the $120 oracle to be filtered (11.2% deviation), resulting in a final price of $100.5. However, if the third oracle reported $115 instead, the mean of $105.3 keeps all oracles (9.5% deviation), resulting in a final price of $105.3. This 5% difference in aggregated price stems from mean-shift sensitivity rather than actual market conditions.

**Recommendation:** For outlier detection, replace the average-based approach with pairwise compatibility checks that determine if any two oracles agree within acceptable bounds, eliminating the mean-sensitivity issues of average-based filtering.

Alternatively, use median-based filtering which is more robust against extreme values and provides more predictable outlier detection behavior.
