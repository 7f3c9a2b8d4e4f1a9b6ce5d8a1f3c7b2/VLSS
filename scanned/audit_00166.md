# Code Maturity

## Summary
No summary provided.

## Details
## Bias in Random Number Generation with u64_range

1. The utilization of the modulo operator ( `%` ) in `u64_range` introduces a bias that renders the output non-uniformly random, which may create predictable patterns. When utilizing the `%` range to map a large number space (`u256`) to a smaller one (`u64 range`), the distribution becomes uneven if the range does not evenly divide the maximum possible value of `u256`. This occurs because some numbers in the `u256` space will wrap around and have a slightly higher chance of occurring compared to others. Ensure there is no unintended bias in the random generation process.

   > _emojicoin_arena/sources/pseudo_randomness.move rust_
   > 
   > /// Pseudo-random substitute for `aptos_framework::randomness::u64_range`, since
   > /// the randomness API is not available during `init_module`.
   > public(friend) inline fun u64_range(min_incl: u64, max_excl: u64): u64 {
   >     let range = ((max_excl - min_incl) as u256);
   >     let sample = ((u256_integer() % range) as u64);
   >     min_incl + sample
   > }

2. In the current implementation, type checking is delayed until `emojicoin_dot_fun::swap`, allowing multiple state modifications to occur beforehand. This exposes the contract to potential inconsistencies due to type confusion. If an invalid type is detected at this late stage, the transaction may fail after partial state changes, violating best practices and impacting the programâ€™s overall functionality. To prevent this, type validation should be performed as early as possible.

## Remediation

Implement the above-mentioned suggestions.
