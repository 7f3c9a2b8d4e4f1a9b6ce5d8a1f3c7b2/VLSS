# Changing Trader Can Revoke Operator Access

## Summary
No summary provided.

## Details
**Update**
Marked as "Fixed" by the client. Addressed in: `73a9c4c08bb0cfb9accdf2931157ca4aea0380b5`.

**File(s) affected:**`vault.move`

**Description:** The `set_trader()` function revokes the `old_trader`'s sub-account access without checking if that address is also the designated `vault_config.operator`. In the `SubAccounts` module, authorization is binary (is authorized or not) and does not track roles. If the `old_trader` address happens to be the same as the `operator` address, `set_trader()` will remove the operator from the allowlist. This locks the operator out of the vault, preventing them from performing tasks like `fill_withdrawal_requests()`.

**Recommendation:** In `set_trader()`, add a check to ensure `old_trader` is not the `vault_config.operator` before revoking access. Note: Simply preventing `trader == operator` is insufficient because the collision could also be created by `set_vault_config_operator()`. The check-before-revoke method handles collisions from both sources.
