# [L-10] Cooldown duration changes apply retroactively

## Summary
No summary provided.

## Details
_Acknowledged_

In `deusd_lp_staking.move` function `withdraw()`, the cooldown duration is read from current parameters at withdrawal time, not locked when user unstakes. Admin can change cooldown periods mid-stream, affecting users who have already begun cooling down.

Let's check this **scenario:**
1. User unstakes 1000 tokens when cooldown = 30 days.
2. User expects withdrawal on Day 30.
3. Admin updates cooldown to 60 days on Day 20.
4. User tries withdrawing on Day 30 â†’ fails because `assert!(current_time >= stake_data.cooldown_start_timestamp + params.cooldown, ECooldownNotOver);` now requires 60 days.

The **root cause** is that `params.cooldown` always reads current global setting, not the duration that was active when the user started cooldown.

One clear and concrete impact is **unpredictable withdrawal times**, users cannot reliably plan when their funds will be available, as the admin can retroactively extend lockup periods.

**Recommendation**

Recommendation is to lock the cooldown duration at unstaking time:

```move
public struct StakeData has store, copy, drop {
    staked_amount: u64,
    cooling_down_amount: u64,
    cooldown_start_timestamp: u64,
    locked_cooldown_duration: u64,  // ADD: Store duration when unstaking
}

// In unstake():
stake_data.locked_cooldown_duration = params.cooldown;

// In withdraw():
assert!(current_time >= stake_data.cooldown_start_timestamp + stake_data.locked_cooldown_duration, ECooldownNotOver);
```

Another solution will be to document clearly that cooldown periods can change anytime and apply retroactively, ensuring users understand this risk before unstaking.
