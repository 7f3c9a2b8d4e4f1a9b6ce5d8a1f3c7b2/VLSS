# Code Maturity

## Summary
No summary provided.

## Details
## Important Details

1. **Dividends Rounding Discrepancies**
   - Within dividends, there may be potential rounding discrepancies, especially after all users have claimed. Most dividend calculations involve proportional distribution, which may result in small leftover amounts due to rounding.

2. **Freeze Rule Configuration Issue**
   - In `freeze_rule::add`, when a new FreezeRule configuration is created and added to the TokenPolicy (in the else block), it currently initializes the configuration with an empty `VecSet` for `frozen_addresses`, rather than adding the provided addresses from `frozen_addresses` into this new configuration. This implies that if this is the first time the FreezeRule is added to the policy, no addresses from the provided `frozen_addresses` vector will actually be frozen at this point.
   
   ```rust
   >_ sources/rules/freeze_rule.move rust
   public fun add<T>(
       policy: &mut TokenPolicy<T>,
       cap: &TokenPolicyCap<T>,
       action: String,
       frozen_addresses: vector<address>,
       ctx: &mut TxContext,
   ) {
       token::add_rule_for_action<T, FreezeRule>(policy, cap, action, ctx);
       if (policy.has_rule_config_with_type<T, FreezeRule, Config>()) {
           frozen_addresses.do!(|addr| freeze_address(policy, cap, addr, ctx));
       } else {
           token::add_rule_config(
               FreezeRule {},
               policy,
               cap,
               Config { frozen_addresses: vec_set::empty() },
               ctx,
           );
       };
   }
   ```

3. **Access Control in Snapshot Cancellation**
   - Currently, there is no role check in `snapshot::cancel_snapshot` to ensure that only authorized users with specific roles may cancel an ongoing snapshot. In particular, since the function resumes paused treasury and token operations, proper access control is necessary to deter unauthorized cancellation.

## Remediation Steps
1. Ensure the funder retrieves the remaining balance in dividends after all users have claimed.
2. Insert `frozen_addresses` into the configuration in `freeze_rule::add`.
3. Implement access control to verify if the caller has the required role to cancel the snapshot.

## Patch Information
1. Issue #1 resolved in commit `9980fe5`.
2. Issue #2 resolved in commit `8011e96`.
3. Issue #3 resolved in commit `f960290`.
