# Inconsistency in Maintaining One-to-One Peg

## Summary
No summary provided.

## Details
## Risks in Staking with thAPT

In staking, `burn_from_thapt` and `reconcile` introduce risks that may break the intended 1:1 peg between thAPT and staked APT. thAPT is meant to be pegged 1:1 to staked APT, representing a claim on the underlying collateral. However, by burning thAPT, the total supply decreases while the underlying APT remains unchanged.

## Code Snippet

```rust
// Source: thala_lsd/sources/staking.move
public entry fun burn_from_thapt(manager: &signer, account_address: address, amount: u64)
,→ acquires TLSD {
    assert!(manager::is_authorized(manager), ERR_TLSD_UNAUTHORIZED);
    coin::burn_from(account_address, amount,
    ,→ &borrow_global<TLSD>(package::resource_account_address()).thAPT_burn_capability)
}

public entry fun reconcile(manager: &signer, amount: u64) acquires TLSD {
    assert!(manager::is_authorized(manager), ERR_TLSD_UNAUTHORIZED);
    let minted = coin::mint(amount,
    ,→ &borrow_global<TLSD>(package::resource_account_address()).thAPT_mint_capability);
    coin::deposit(signer::address_of(manager), minted)
}
```

While this may be mitigated via `reconcile`, which allows the authorized manager to mint new thAPT tokens, excessive minting may inflate the supply of thAPT, breaking the peg in the opposite direction (more thAPT in circulation than staked APT), giving rise to a similar problem.

## Remediation

Introduce checks to ensure the total thAPT supply always matches the total staked APT.

### Patch

Fixed in `5ba884a`.
