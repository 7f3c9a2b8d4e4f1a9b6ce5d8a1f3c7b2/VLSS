# Missing Commission Rate Check

## Summary
The bug report states that there is an issue with the commission rate in the staking::register_candidate function. This can cause an error in the staking_pool::advance_epoch function, which can disrupt the epoch change. The bug is caused by not checking if the commission rate is less than or equal to 10000, which can lead to the commission being split incorrectly. The fix for this issue is to make sure that the commission rate does not exceed 10000 when creating a node. This bug has been fixed in the a1e81c6 patch.

## Details
## Node Creation and Commission Rate in Staking

When creating a node in `staking::register_candidate`, the initial value of `commission_rate` is set. However, since there is no check to ensure that the commission rate is less than or equal to 10000, an `ENotEnough` error may occur in `staking_pool::advance_epoch` when the node becomes part of the committee. As a result, a single node can disrupt the epoch change.

> _sources/staking/staking_pool.move_ Rust

## Advance Epoch for the `StakingPool`

```rust
public(package) fun advance_epoch(
    pool: &mut StakingPool,
    mut rewards: Balance<WAL>,
    wctx: &WalrusContext,
) {
    [...]
    // Split the commission from the rewards.
    let total_rewards = rewards.value();
    let commission = rewards.split(
        total_rewards * (pool.commission_rate as u64) / (N_BASIS_POINTS as u64),
    );
    pool.commission.join(commission);
}
```

## Remediation

Ensure that a commission rate doesnâ€™t exceed 10000 when creating a node.

## Patch

Fixed in commit `a1e81c6`.
