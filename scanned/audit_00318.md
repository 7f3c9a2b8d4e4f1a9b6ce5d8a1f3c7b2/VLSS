# Reward Distribution Inconsistency

## Summary
The report describes a bug where updating the reward configuration with a new reward amount causes the reward per share value to not be adjusted correctly. This means that users will receive rewards based on the new amount instead of the old one. The suggested solution is to update the farm timestamp before updating the reward configuration. The bug has been fixed in the latest version.

## Details
## Update Reward Configuration

When updating the reward configuration with a new `reward_per_day`, the `reward_per_share` value, which represents the reward per share, should be adjusted to reflect the new configuration. However, the `update_reward_config` function fails to calculate the previous unclaimed rewards and update the `farm.timestamp` based on the old `reward_per_day` prior to updating the `reward_per_share` before applying the new configuration.

```rust
> _reserve_farm.move_rust
public fun update_reward_config(
    farm: &mut ReserveFarm,
    type_info: TypeInfo,
    new_config: RewardConfig
) {
    let reward = borrow_reward_mut(farm, type_info);
    reward.reward_config = new_config;
}
```

This oversight means that users will receive rewards based on the new `reward_per_day` rather than the old one for the `time_diff` since the last update.

## Remediation

Update the value of `farm.timestamp` by invoking `self_update` prior to updating the `reward_config` in `update_reward_config`.

## Patch

Fixed in `9d25e65`.

Â© 2024 Otter Audits LLC. All Rights Reserved. 10/16
