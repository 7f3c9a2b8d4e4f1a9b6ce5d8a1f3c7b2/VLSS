# Unrestricted Lock Period Updates Can Break Depositor and Vault Creator Assumptions

## Summary
This bug report is about a function called `set_vault_config_lock_period()` that allows the exchange manager to change a parameter called `vault_config.lock_period_ms` at any time. This parameter affects user withdrawals and sudden updates can cause unexpected issues for depositors and disrupt the strategies of vault creators. To address these risks, the report recommends implementing a grace period before applying the new lock period, applying the updated lock period only to new deposits, and clearly documenting the risks for users and vault creators.

## Details
**Update**
Marked as "Acknowledged" by the client. The client provided the following explanation:

> For all parameter changes to VaultConfig, we will have a notification period, and will not modify system parameters arbitrarily or abruptly.

**File(s) affected:**`vault.move`

**Description:** The `set_vault_config_lock_period()` function allows the exchange manager to modify `vault_config.lock_period_ms` at any time without restriction. Since this lock period applies directly to user withdrawals, sudden updates can break depositorsâ€™ assumptions and result in unexpected lockups. Furthermore, because the lock period is defined globally rather than per vault, changing it can also disrupt assumptions made by vault creators, potentially affecting their strategy design or user expectations.

**Recommendation:** To mitigate these risks, consider the following improvements:

1.   Introduce a grace period before applying the new `lock_period_ms`, allowing depositors who wish to exit to withdraw before the change takes effect.
2.   Apply the updated `lock_period_ms` only to new deposits. This can be achieved by extending the `Position` struct with a `Table` that records each deposit amount alongside the lock period that was active at the time of deposit.
3.   Clearly document the risks for both depositors and vault creators, explicitly stating that the manager can update `lock_period_ms` at any time and to any value.
