# Zero Value Checks

## Summary
No summary provided.

## Details
## Turbo Finance Audit 05 — General Findings

1. **`rewarder::deposit_rewarder` relies on `coin::value<T>(&coin)` to obtain the deposit amount.**
   However, there is no check on the validity of the coin object itself, enabling the creation of a coin object with a fake type (T) and a value of zero using `coin::zero<u64>()` for example.
   > _rewarder.move rust_
   ```rust
   public fun deposit_rewarder<T>(
       config: &GlobalConfig,
       manager: &mut RewarderManager,
       coin: Coin<T>,
       ctx: &mut TxContext
   ) {
       config::checked_package_version(config);
       let type_name = type_name::get<T>();
       if (!bag::contains<TypeName>(&manager.vault, type_name)) {
           let zero_balance = balance::zero<T>();
           bag::add<TypeName, Balance<T>>(&mut manager.vault, type_name, zero_balance);
       };
       let before_amount = coin::value<T>(&coin);
       let after_amount = balance::join<T>(bag::borrow_mut<TypeName, Balance<T>>(&mut manager.vault, type_name), coin::into_balance(coin));
       [...]
   }
   ```

2. **`rewarder::accumulate_strategy_strategy_reward` will fail due to division by zero if `strategy_share` is equal to zero.**

3. **`vault::check_rebalance_loop` utilizes a limit parameter to control the maximum number of vaults processed in a single call.**
   If `limit == 0`, the loop condition `rebalance_vaults_length < limit` will always be false, and the loop will never be executed. Therefore, the off-chain logic that executes `check_rebalance_loop` will run infinitely because the returned `vault_id_option` will be the same. Therefore, `check_rebalance_loop` should return early to avoid unnecessary operations.

### Remediation
1. Include a check to ensure the deposited coin has a value greater than zero.
2. Add a check to verify `strategy_share` is greater than zero before the division.
3. Include a check for `limit > 0` at the beginning of the function to ensure the loop only runs if a positive limit is provided.

---

© 2024 Otter Audits LLC. All Rights Reserved. 16/21  
© 2024 Otter Audits LLC. All Rights Reserved. 17/21
