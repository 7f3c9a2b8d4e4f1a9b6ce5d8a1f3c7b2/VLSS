# Inappropriate Unlock Amount

## Summary
No summary provided.

## Details
## Internal Unlock Process

The `internal_unlock` function unlocks the amount from the delegation pool and burns the equivalent `truAPT` tokens. It creates an `UnlockRequest` for the user with the unstaked amount, which later facilitates the withdrawal of APT from the protocol.

```rust
> _ aptos-staker/sources/staker.move rust
let unstaked_apt = pending_inactive - pending_inactive_pre_unlock;
assert!(amount >= unstaked_apt && amount <= unstaked_apt + 2, error::invalid_argument(EINVALID_UNSTAKED_AMOUNT));
let unlock_request = UnlockRequest {
    amount: amount,
    user: receiver,
    olc: olc,
    delegation_pool: pool,
    residual_rewards_collected: false
};
```

`unstaked_apt` represents the actual stake amount being unstaked from the delegation pool. Additionally, the amount sometimes exceeds the unstaked amount, potentially disbursing more APT than intended. Therefore, it is advisable to utilize `unstaked_apt` to create the unlock request.

## Remediation

Utilize `unstaked_apt` instead of `amount` while creating the `UnlockRequest` in `internal_unlock`.

## Patch

The development team acknowledges the issue and accepts the rounding costs to enhance user experience.

Â© 2024 Otter Audits LLC. All Rights Reserved. 6/12
