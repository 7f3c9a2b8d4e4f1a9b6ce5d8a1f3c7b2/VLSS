# Market Order Suggestions

## Summary
No summary provided.

## Details
## Proposal to Prevent Mismatch Between Order Access Keys

To prevent a mismatch between a `market::Order.order_access_key` and the order access key used to look up a `user::Order`, it is proposed that:

1. `user::place_order_internal` return the order access key from user-side insertion.
2. `market::place_limit_order` verify the return of `user::place_order_internal` is equal to the local variable from `user::get_next_order_access_key_internal`.

## Patch

Patch added in commit `171ae71`.

## Check Post-Match Size Against Minimum Size Rather Than Zero

### Description

Presently, after `market::place_limit_order` concludes optional cross-spread matching, the function returns if the remaining size to fill is zero. Instead, it is proposed that the condition be modified to check that size is greater than the minimum order size for the market.

### Patch

This was patched by checking the size against minimum size instead of zero. Corresponding commit `562bfea`.

```diff
src/move/econia/sources/market.move DIFF
@@ -2268,8 +2270,11 @@ module econia::market {
- if ((restriction == IMMEDIATE_OR_CANCEL) || (size == 0))
+ if ((restriction == IMMEDIATE_OR_CANCEL) ||
+ (size < order_book_ref_mut.min_size))
}
```

## Econia Labs Audit 05 | General Findings

## Add Price Field to `market::Order`

### Description

For data locality and ease of indexing, it is proposed that a price field be added to `market::Order`. The function `market::match` should be modified to incorporate a check that the price from the head of the AVL queue matches that inside the borrowed order, as well as the function `market::place_limit_order` should be modified to specify the order price during AVL queue insertion.

### Patch

Improvement was added in commit `aeb53de`.
