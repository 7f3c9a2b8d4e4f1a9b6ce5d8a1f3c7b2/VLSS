# Redundant Message Storage

## Summary
No summary provided.

## Details
## Bridge Message Approval

The function `bridge::approve_bridge_message` stores both token messages and system messages in the `BridgeRecord` data structure. However, storing system messages is redundant since they execute immediately after verification in `execute_system_message`. This redundant storage adds unnecessary complexity to the codebase, increasing the risk of confusion or errors during message retrieval or processing.

> _packages/bridge/sources/bridge.moverust_

```rust
public fun approve_bridge_message(
    self: &mut Bridge,
    message: BridgeMessage,
    signatures: vector<vector<u8>>,
) {
    [...]
    else {
        [...]
        linked_table::push_back(&mut inner.bridge_records, key, BridgeRecord {
            message,
            verified_signatures: some(signatures),
            claimed: false
        });
    };
    emit(TokenTransferApproved { message_key: key });
}
```

## Remediation

Update `approve_bridge_message` to store only token messages in the `BridgeRecord` data structure. System messages execute directly within `execute_system_message` without being stored in `BridgeRecord`.

## Patch

Fixed in PR #17579.

Â© 2024 Otter Audits LLC. All Rights Reserved. 14/19
