# Code Refactoring

## Summary
No summary provided.

## Details
## Code Review Recommendations

1. **Utilization of `ordered_map::reverse`**  
   Make use of `ordered_map::reverse` for both the asks and bids maps in `place_limit_order` within `Orderbook` so that the order of elements in the map is reversed, providing a correctly sorted list for the fills vector.

2. **Order Types Hardcoding**  
   Currently, the number of possible `order_types` is hard coded in the functions. This may result in time-consuming modifications if the number of `order_types` were to change, requiring the replacement of each of these hardwired values.

3. **Move `check_orderbook_parameters` to `orderbook`**  
   Transferring `check_orderbook_parameters`, presently located in `market_manager`, to `orderbook` will contribute to enhancing the organization and modularity of the entire codebase.

   ```rust
   // sources/market_manager.moverust
   fun check_orderbook_parameters(
       lot_size: u64,
       tick_size: u64,
   ) {
       assert!(
           lot_size < constants::one_b9() && tick_size < constants::one_b9(),
           errors::invalid_market_parameters()
       );
   }
   ```

4. **Efficiency Improvement in `remove_from_branch`**  
   In the context of `remove_from_branch`, a variable named `keys` is assigned the value of `&branch.keys`, and after that, in the subsequent line, `&branch.keys` is invoked once more to determine the length of the keys. This is marginally less efficient, as it involves the double dereferencing of `branch.keys` instead of directly utilizing the previously declared `keys` vector.

## Remediation Steps

1. Ensure `place_limit_order` utilizes `ordered_map::reverse`.
2. Define the number of possible `order_types` in constants.
3. Move `check_orderbook_parameters` into `orderbook`.
4. Use the `keys` variable instead of dereferencing `branch.keys` again to get the length.

Â© 2024 Otter Audits LLC. All Rights Reserved. 18/21
