# Bypass Instant Unstake Fee

## Summary
No summary provided.

## Details
## MeeStaking Fee Structure

Once a user stakes coins to the pool, 15 days of lockup must pass before they are allowed to claim back their coins. However, this procedure can be skipped in exchange for a fee, representing 15%. 

The fee is calculated as follows:

```rust
if (is_instant == 1) {
    // withdraw user's unlocked amount
    let instant_fee = amount * INSTANT_UNSTAKE_FEE / FEE_DIVIDER;
    let real_amount = amount - instant_fee;
    // transfer fee
    let fee_coin = coin::extract<StakeCoin>(&mut pool_info.staked_coins, instant_fee);
    let owner_capability = borrow_global<OwnerCapability>(pool_address);
    coin::deposit<StakeCoin>(owner_capability.treasury, fee_coin);
    // transfer unstaked amount to user
    let withdraw_coin = coin::extract<StakeCoin>(&mut pool_info.staked_coins, real_amount);
    coin::deposit<StakeCoin>(unstaker_address, withdraw_coin);
}
```

This allows an attacker to pay no fees for small amounts, because the fee rounds down to zero. More specifically, whenever the amount < (FEE_DIVIDER / INSTANT_UNSTAKE_FEE), the fee can be avoided.

More precisely, `FEE_DIVIDER`â€™s value is `1000` and `INSTANT_UNSTAKE_FEE` is `150`. By computing the division we get the result `6`, which means that for instant unstakes smaller or equal to `6`, no fee will be paid.

## Remediation

Round fee computation up to ensure that it is not profitable for an attacker to bypass the fee in this manner.

## Patch

The Meeiro team acknowledges the issue and notes not to use low decimal tokens.
