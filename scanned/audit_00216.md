# Failure to Clear Investor Attributes After Removal

## Summary
The bug report describes an issue in the registry_service::remove_investor function where, after an investor is removed, their main record is deleted but associated data, such as compliance attributes, remains in the attributes table. This can cause problems if a new investor is registered with the same ID as the removed investor, as the system may link the new investor to the old attributes, potentially giving them unintended access to privileges. To fix this, the report suggests removing the investor's attributes from the table when their record is deleted. This issue has been resolved in version 06538b8.

## Details
## Investor Removal in Registry Service

In `registry_service::remove_investor`, when an investor is removed, only their main record in the `investors` table is deleted. Any associated data, such as compliance attributes, remains in the `attributes` table. If a new investor is later registered with the same ID as the removed investor, the system will inadvertently link the new investor to the old attributes, potentially allowing unintended access to privileges based on the deleted investor’s attributes.

## Code Snippet

```rust
move/sources/registry_service.move
public entry fun remove_investor(authorizer: &signer, id: String) acquires InvestorInfo {
    [...]
    let investors = &mut investor_info_mut().investors;
    smart_table::remove(investors, id);
    event::emit(
        DSRegistryServiceInvestorRemoved {
            investorId: id,
            sender: signer::address_of(authorizer)
        }
    );
}
```

## Remediation

Remove the investor’s attributes from the `attributes` table when the investor record is deleted.

## Patch

Resolved in commit `06538b8`.
