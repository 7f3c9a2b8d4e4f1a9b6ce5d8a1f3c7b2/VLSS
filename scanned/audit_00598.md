# Incorrect Withdraw Fee Calculation On Update

## Summary
The bug report states that in the protocol::update function, there is an issue with the fee calculation for automatic withdrawals. The code currently uses the contract's start time to calculate the fee, which results in the fee being recalculated for a period that the user has already paid for. The recommended solution is to use the old_end_time instead of the contract's start time for fee calculation. This issue has been fixed in the code by calculating the additional fee from the old_end_time.

## Details
## Update on Protocol Fee Calculation

In `protocol::update`, the change in `amount_per_period` triggers an additional fee calculation using `withdrawal_fees` based on `contract.start`.

**File**: `sources/protocol.move`

```rust
if (old_end_time < contract.end && contract.meta.automatic_withdrawal) {
    let additional_withdrawal_fees = withdrawal_fees(
        contract.start,
        contract.end, 
        contract.meta.withdrawal_frequency, 
        get_tx_fee()
    );
    coin::transfer<AptosCoin>(
        authority, 
        get_withdrawor_address(),
        additional_withdrawal_fees
    );
}
```

However, using the start time for fee calculation results in the fee being recalculated for the period that the user has already paid for.

## Remediation
Use `old_end_time` instead of `contract.start` in `protocol::update` when calculating the additional fee using `withdrawal_fees`.

## Patch
Fixed in `bd4f2e9` by calculating the additional fee from `old_end_time`.
