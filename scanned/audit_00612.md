# Improper Implementation Of Withdraw All

## Summary
No summary provided.

## Details
## Liquidity Pool Management

A pool creator may remove liquidity from the pool by specifying a percentage to remove in bps format. However, if the LBP is still ongoing, only a portion of the liquidity may be removed from the pool, with the remaining liquidity being only removable once the LBP has concluded.

This is implemented through a check of the `remove_bps` variable to see if it is equal to `BPS_BASE`. If this check evaluates as true, an assertion is made to ensure that the LBP has indeed ended before allowing for complete liquidity removal.

This may be easily bypassed by passing in `remove_bps = 9999` and calling the `remove_liquidity` multiple times. This removes all the liquidity from the pool even when the LBP has not ended.

```rust
thala-launchpad/sources/lbp.move 

let withdraw_all = remove_bps == BPS_BASE;
if (withdraw_all) {
    assert!(lbp_ended(lbp), ERR_LBP_NOT_ENDED)
};
```

## Remediation
Assert `amount_0 != balance_0` && `amount_1 != balance_1` if `withdraw_all` is false.

## Patch
Fixed in `cd724d9` by removing `withdraw_all` and allowing the creator to remove any amount of liquidity from their pool.
