# Inactive Users in the Pool

## Summary
No summary provided.

## Details
## Unstaking Process for Users

After the lockup period has passed (one week), users are allowed to unstake their coins partially or entirely. Even if the users unstake all their coins, they donâ€™t have the possibility to leave the StakePool unless an emergency happens. In that case, after withdrawing all the stake, the user will be removed from the pool.

## Code Overview

```rust
sources/stake.move RUST
/// Withdraws all the user stake from the pool. Only accessible in the
/// "emergency state".
public fun emergency_unstake<S, R>(user: &signer, pool_addr: address) -> Coin<S> acquires StakePool {
    assert!(exists<StakePool<S, R>>(pool_addr), ERR_NO_POOL);
    [...]
    let user_stake = table::remove(&mut pool.stakes, user_addr);
    let UserStake { amount, unobtainable_reward: _, earned_reward: _, unlock_time: _ } = user_stake;
    coin::extract(&mut pool.stake_coins, amount)
}
```

## Remediation

Add separate support to leave the pool when all the stake has been withdrawn or automatically remove a user from the pool when all the stake was removed.
