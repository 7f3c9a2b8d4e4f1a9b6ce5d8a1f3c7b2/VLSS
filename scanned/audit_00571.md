# Incorrect Fee Calculation

## Summary
No summary provided.

## Details
## Issue: Incorrect Calculation of Protocol Fee

The `exact_out` function incorrectly calculates the protocol fee. The function should not apply the fee to the `exact_in` value since the quantity of coins being swapped is determined by the actual `exact_in` value. 

For instance, a user who inputs 100 Coins with `amount_in` is required to pay a significant fee, although the value of `actual_amount_in` is only 10 Coins.

## Remediation

1. Calculate the `actual_amount_in` to swap.
2. Calculate the `protocol_fee` to swap.
   - \((\text{actual\_amount\_in} + \text{protocol\_fee}) \times \text{protocol\_fee\_percent} = \text{protocol\_fee} \quad (05.1)\)  
   - \(\text{protocol\_fee} = \frac{\text{actual\_amount\_in}}{1 - \text{protocol\_fee\_percent}} \quad (05.2)\)
3. Take `protocol_fee` from Coin<CI>.
4. Add `actual_amount_in` of Coin<CI> to the Pool.
5. Remove `amount_out` of Coin<CO> from the Pool.

## Patch

Fixed in commit `5eb1738`.
