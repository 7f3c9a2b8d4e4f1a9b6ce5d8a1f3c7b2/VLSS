# Inefficient Invariant Calculation

## Summary
No summary provided.

## Details
## Invariant Calculation Updates

The following functions:

- `calc_swap_fixed_in`
- `calc_swap_fixed_out`
- `calc_withdraw_fixed_amounts`
- `calc_deposit_fixed_amounts`

calculate the invariant using `calc_invariant` and then convert it to a fixed-point number. 

Using `calc_invariant_fixed` is more efficient, as it calculates the invariant in a fixed-point format and incorporates an invariant check: `invariant >= FIXED_ONE`.

## Remediation

Replace `calc_invariant` with `calc_invariant_fixed`, which includes the assert statement:

```rust
invariant >= FIXED_ONE.
```

### Code Diff

The changes in `geometric_mean_calculations.move` are as follows:

```diff
- assert!(inv > 0, EZeroInvariant); // this should never fail
+ assert!(inv >= FIXED_ONE, EZeroInvariant); // this should never fail
```

```diff
- let invarnt = fixed::convert_int_to_fixed(calc_invariant(balances, weights));
+ let invarnt = calc_invariant_fixed(balances, weights);
```

## Patch

Fixed in commit `8676084`.
