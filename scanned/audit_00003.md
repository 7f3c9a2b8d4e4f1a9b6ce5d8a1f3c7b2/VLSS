# Hardcoded 6-Decimal Assumption in Bank Conversion

## Summary
No summary provided.

## Details
**Update**
Marked as "Acknowledged" by the client. The client provided the following explanation:

> create_bank is invoked by the official party. We will ensure that the token has 6 decimal places, and additional parameters need to be added to CoinMetadata. Note that subsequent contract upgrades will be incompatible with this entry method.

**File(s) affected:**`bank.move`, `library.move`

**Description:** The `Bank<T>` contract is generic over coin type `T` but hardcodes decimal conversion assuming all coins have 6 decimals. The `convert_usdc_to_base_decimals()` function unconditionally multiplies amounts by 1000 to convert from 6 decimals to the internal 1e9 base units.

If a bank is created for coins with different decimal counts (e.g., SUI with 9 decimals), the internal accounting will be inflated or deflated by powers of 10:

*   9-decimal coins: Internal balances 1000x inflated
*   18-decimal coins: Internal balances divided by 1 billion

While this does not create an exploitable vulnerability (the system remains mathematically consistent since all users share the same conversion factor), it creates several operational risks:

1.   **Misconfigured parameters**: Default insurance fund transfer limits are set assuming 6-decimal coins. For 9-decimal coins, the effective limit would be 1000x smaller than intended.
2.   **Off-chain confusion**: Events and indexers would display balances that appear 1000x larger for 9-decimal coins.
3.   **Misleading generics**: The `Bank<T>` generic type parameter suggests any coin type is supported, but only 6-decimal coins work as designed.

The issue stems from the function name `convert_usdc_to_base_decimals()` explicitly referencing USDC, yet being used for all coin types in the generic `Bank<T>` contract.

The team has confirmed that they intend to only support USDC as an asset for now.

**Recommendation:** Since only USDC should be supported, we recommend adding validation in `create_bank()` to ensure only 6-decimal coins can be used:

```
let decimals = coin::get_decimals<T>();
assert!(decimals == 6, error::unsupported_coin_decimals());
```
